>     # Good line (92% of the time to get ~8% malformed)
>     line="{\"ts\": $ts, \"session\": \"$session\", \"user\": \"$user\", \"meta\": {\"admin\": true}}"
>   else
>     # Malformed line (missing quotes, wrong brackets, etc.)
>     if [[ $((RANDOM % 2)) -eq 0 ]]; then
>       line="{ts: $ts, session: \"$session\", user: \"$user\", meta: {admin: true}}"  # Missing outer quotes
>     else
>       line="{\"ts\": $ts, \"session\": \"$session\", \"user\": \"$user\", \"meta\": {\"admin\": true}"  # Missing closing brace
>     fi
>   fi
>
>   # Output to STDOUT
>   echo "$line"
>
>   # Append to log file
>   echo "$line" >> "$log_file"
>
>   # Rotate logs if needed
>   rotate_logs
>
>   # Increment line counter
>   line_count=$((line_count + 1))
>
>   # Wait for 18-24ms
>   sleep_time=$((18 + RANDOM % 7))
>   sleep 0.0${sleep_time}s
> done
>
> # Output summary information
> echo "Creating summary file..."
> echo "producer_lines_total=$line_count"
> echo "rotations_min=3"  # We should have at least 3 rotations
>
> # Write to summary file in the /app directory
> echo "producer_lines_total=$line_count" > /app/summary.tmp
> echo "rotations_min=3" >> /app/summary.tmp
>
> echo "Summary file created with $line_count lines"
> EOF
root@09078e0953c3:/app#
